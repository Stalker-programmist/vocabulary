<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vocabulary Trainer</title>
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="brand">
        <div class="badge">SRS-lite</div>
        <div>
          <h1>Vocabulary Trainer</h1>
          <p>Build a personal lexicon with a calm daily review rhythm.</p>
        </div>
      </div>
      <nav class="nav-tabs" aria-label="Primary">
        <button class="tab is-active" data-section="words" type="button">Words</button>
        <button class="tab" data-section="review" type="button">Training mode</button>
        <button class="tab" data-section="stats" type="button">Stats</button>
        <button class="tab" data-section="profile" type="button">Profile</button>
      </nav>
      <div class="auth-bar" aria-label="Account">
        <span class="auth-status" id="auth-status">Not signed in</span>
        <button class="ghost" id="auth-login-btn" type="button">Log in</button>
        <button class="primary" id="auth-register-btn" type="button">Sign up</button>
        <button class="ghost" id="auth-logout-btn" type="button" hidden>Log out</button>
      </div>
    </header>

    <main class="content">
      <section id="words" class="section is-active">
        <div class="section-head">
          <div>
            <h2>Words</h2>
            <p>Collect terms, examples, and tags. Edit any row with one click.</p>
          </div>
          <div class="section-actions">
            <button class="ghost" id="refresh-words" type="button">Refresh</button>
          </div>
        </div>

        <div class="grid" data-dnd-scope="words-grid">
          <div class="card" style="--delay: 0.05s;" data-card-id="add-word">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3 id="form-title">Add a word</h3>
                  <p>New entries start at stage 0 and are due today.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>
            <form id="word-form" class="form">
              <label>
                <span>Term</span>
                <input name="term" id="term" type="text" placeholder="bonjour" required />
              </label>
              <label>
                <span>Translation</span>
                <input name="translation" id="translation" type="text" placeholder="hello" required />
              </label>
              <label>
                <span>Example</span>
                <textarea name="example" id="example" placeholder="Bonjour, comment ca va?"></textarea>
              </label>
              <label>
                <span>Tags</span>
                <input name="tags" id="tags" type="text" placeholder="travel, greetings" />
              </label>
              <div class="form-actions">
                <button class="primary" type="submit" id="save-word">Add word</button>
                <button class="ghost" type="button" id="cancel-edit" hidden>Cancel</button>
              </div>
              <div class="status" id="form-status" role="status"></div>
            </form>
          </div>

          <div class="card" style="--delay: 0.1s;" data-card-id="search-filter">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Search and filter</h3>
                  <p>Search by term or translation, filter by a single tag.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>
            <div class="form">
              <label>
                <span>Search</span>
                <input id="search-input" type="search" placeholder="type to search" />
              </label>
              <label>
                <span>Tag</span>
                <input id="tag-filter" type="text" placeholder="food" />
              </label>
              <label class="check-row">
                <input id="starred-filter" type="checkbox" />
                <span>Starred only</span>
              </label>
              <div class="status" id="search-status" role="status"></div>
            </div>
          </div>

          <div class="card" style="--delay: 0.12s;" data-card-id="import-export">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Import / export</h3>
                  <p>Download your word list or bring one back in.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>
            <div class="form">
              <label>
                <span>CSV file</span>
                <div class="file-picker">
                  <button class="ghost" id="import-file-btn" type="button">Choose file</button>
                  <span class="file-name" id="import-file-name">No file chosen</span>
                </div>
                <input id="import-file" class="file-input" type="file" accept=".csv,text/csv" />
              </label>
              <div class="form-actions">
                <button class="primary" id="import-csv" type="button">Import CSV</button>
                <button class="ghost" id="export-csv" type="button">Export CSV</button>
              </div>
              <div class="status" id="import-status" role="status"></div>
            </div>
          </div>

          <div class="card table-card" style="--delay: 0.15s;" data-card-id="word-list">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Word list</h3>
                  <p>Track stage and next review date per word.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
                <div class="wordlist-tools" role="search">
                  <input
                    id="wordlist-search-input"
                    type="search"
                    placeholder="Search words..."
                    autocomplete="off"
                  />
                  <button class="ghost" id="wordlist-clear-search" type="button">
                    Clear
                  </button>
                  <label class="wordlist-pagesize" aria-label="Page size">
                    <span class="sr-only">Page size</span>
                    <select id="wordlist-page-size">
                      <option value="5">5</option>
                      <option value="10" selected>10</option>
                      <option value="15">15</option>
                      <option value="20">20</option>
                    </select>
                  </label>
                  <button class="ghost" id="wordlist-prev" type="button">Prev</button>
                  <button class="ghost" id="wordlist-next" type="button">Next</button>
                  <span class="wordlist-pageinfo" id="wordlist-page-info">—</span>
                </div>
              </div>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Term</th>
                    <th>Translation</th>
                    <th>Example</th>
                    <th>Tags</th>
                    <th>Stage</th>
                    <th>Next review</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="words-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="review" class="section">
        <div class="section-head">
          <div>
            <h2>Training mode</h2>
            <p>Pick a theme and load all words for a focused session.</p>
          </div>
        </div>

        <div class="grid" data-dnd-scope="training-grid">
          <div class="card" style="--delay: 0.05s;" data-card-id="training-entry">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Choose a theme</h3>
                  <p>Themes are built from your tags.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>

            <div class="form">
              <label>
                <span>Theme</span>
                <select id="training-theme"></select>
              </label>
              <div class="form-actions">
                <button class="primary" id="training-start" type="button">Load words</button>
              </div>
              <div class="status" id="training-status" role="status"></div>
            </div>
          </div>

          <div class="card" style="--delay: 0.08s;" data-card-id="training-levels">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Training levels</h3>
                  <p>Use the loaded word set to practice.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>
            <div class="form">
              <label>
                <span>Level</span>
                <select id="training-level">
                  <option value="1">Level 1 — multiple choice</option>
                  <option value="2">Level 2 — matching</option>
                  <option value="3">Level 3 — typing</option>
                  <option value="4">Level 4 — context</option>
                </select>
              </label>
              <div class="form-actions">
                <button class="primary" id="training-run" type="button">Start training</button>
                <button class="ghost" id="training-reset" type="button">Reset</button>
              </div>
              <p class="hint" id="training-hint">Load words first.</p>
              <div class="status" id="training-game-status" role="status"></div>
            </div>
          </div>

          <div class="card table-card" style="--delay: 0.1s;" data-card-id="training-level-1" hidden>
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Level 1 — Choose the answer</h3>
                  <p id="training-l1-progress">No session yet.</p>
                </div>
                <div class="header-actions">
                  <button class="ghost" id="training-l1-skip" type="button">Skip</button>
                </div>
              </div>
            </div>
            <div class="training-game">
              <p class="training-question" id="training-l1-question">—</p>
              <div class="choice-grid" id="training-l1-choices"></div>
            </div>
          </div>

          <div class="card table-card" style="--delay: 0.12s;" data-card-id="training-level-2" hidden>
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Level 2 — Matching</h3>
                  <p id="training-l2-progress">Pair 8 terms with their translations.</p>
                </div>
                <div class="header-actions">
                  <button class="ghost" id="training-l2-new" type="button">New set</button>
                  <button class="primary" id="training-l2-check" type="button">Check</button>
                </div>
              </div>
            </div>
            <div class="match-board" id="training-l2-board">
              <div class="match-col">
                <h4 class="match-title">Terms</h4>
                <div class="match-list" id="training-l2-terms"></div>
              </div>
              <div class="match-col">
                <h4 class="match-title">Translations</h4>
                <div class="match-list" id="training-l2-translations"></div>
              </div>
            </div>
            <div class="status" id="training-l2-status" role="status"></div>
          </div>

          <div class="card table-card" style="--delay: 0.12s;" data-card-id="training-level-3" hidden>
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Level 3 — Typing</h3>
                  <p id="training-l3-progress">Write the translation for each term.</p>
                </div>
                <div class="header-actions">
                  <button class="ghost" id="training-l3-new" type="button">New set</button>
                  <button class="primary" id="training-l3-check" type="button">Check</button>
                </div>
              </div>
            </div>
            <div class="training-sheet" id="training-l3-sheet"></div>
            <div class="status" id="training-l3-status" role="status"></div>
          </div>

          <div class="card table-card" style="--delay: 0.14s;" data-card-id="training-level-4" hidden>
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Level 4 — Context</h3>
                  <p id="training-l4-progress">Fill the blank with the term or its translation.</p>
                </div>
                <div class="header-actions">
                  <button class="ghost" id="training-l4-new" type="button">New set</button>
                  <button class="primary" id="training-l4-check" type="button">Check</button>
                </div>
              </div>
            </div>
            <div class="training-sheet" id="training-l4-sheet"></div>
            <div class="status" id="training-l4-status" role="status"></div>
          </div>

          <div class="card table-card" style="--delay: 0.1s;" data-card-id="training-words">
            <div class="card-head">
              <div>
                <h3>Word set</h3>
                <p id="training-count">No words loaded yet.</p>
              </div>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Term</th>
                    <th>Translation</th>
                    <th>Tags</th>
                    <th>Stage</th>
                    <th>Next review</th>
                  </tr>
                </thead>
                <tbody id="training-words-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="stats" class="section">
        <div class="section-head">
          <div>
            <h2>Stats</h2>
            <p>Daily activity and the next wave of due words.</p>
          </div>
          <div class="section-actions">
            <button class="ghost" id="refresh-stats" type="button">Refresh</button>
          </div>
        </div>
        <div class="stats-grid" data-dnd-scope="stats-grid">
          <div class="stat-card" data-card-id="stat-due-today" style="--delay: 0.05s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>Due today</h3>
            <div class="stat-value" id="stat-due-today">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-due-7d" style="--delay: 0.1s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>Due in 7d</h3>
            <div class="stat-value" id="stat-due-7d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-new-1d" style="--delay: 0.15s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>New words (1d)</h3>
            <div class="stat-value" id="stat-new-1d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-new-7d" style="--delay: 0.2s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>New words (7d)</h3>
            <div class="stat-value" id="stat-new-7d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-new-30d" style="--delay: 0.25s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>New words (30d)</h3>
            <div class="stat-value" id="stat-new-30d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-new-365d" style="--delay: 0.3s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>New words (365d)</h3>
            <div class="stat-value" id="stat-new-365d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-reviews-1d" style="--delay: 0.35s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>Reviews (1d)</h3>
            <div class="stat-value" id="stat-reviews-1d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-reviews-7d" style="--delay: 0.4s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>Reviews (7d)</h3>
            <div class="stat-value" id="stat-reviews-7d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-reviews-30d" style="--delay: 0.45s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>Reviews (30d)</h3>
            <div class="stat-value" id="stat-reviews-30d">0</div>
          </div>
          <div class="stat-card" data-card-id="stat-reviews-365d" style="--delay: 0.5s;">
            <button class="drag-handle" type="button" draggable="true" aria-label="Move tile" title="Drag to move"></button>
            <h3>Reviews (365d)</h3>
            <div class="stat-value" id="stat-reviews-365d">0</div>
          </div>
        </div>

        <div class="card chart-card activity-card" style="--delay: 0.02s;">
          <div class="card-head">
            <div class="card-head-row">
              <div>
                <h3>Activity chart</h3>
                <p>Compare new words vs reviews across time.</p>
              </div>
              <div class="chart-controls">
                <button class="ghost" data-stats-range="1d" type="button">Day</button>
                <button class="ghost" data-stats-range="7d" type="button">Week</button>
                <button class="ghost" data-stats-range="30d" type="button">Month</button>
                <button class="ghost" data-stats-range="365d" type="button">Year</button>
              </div>
            </div>
          </div>
          <div class="chart-wrap">
            <canvas id="stats-chart" height="220" aria-label="Stats chart"></canvas>
            <div class="chart-legend">
              <span class="legend-item legend-words">New words</span>
              <span class="legend-item legend-reviews">Reviews</span>
            </div>
            <div class="chart-tooltip" id="stats-tooltip" data-visible="false"></div>
          </div>
          <div class="status" id="stats-chart-status" role="status"></div>
        </div>

        <div class="card table-card leaderboard-card" style="--delay: 0.55s;">
          <div class="card-head">
            <div class="card-head-row">
              <div>
                <h3>Leaderboard</h3>
                <p>Top learners by words mastered.</p>
              </div>
              <div class="chart-controls">
                <button class="ghost" data-leaderboard-range="7d" type="button">Week</button>
                <button class="ghost" data-leaderboard-range="30d" type="button">Month</button>
                <button class="ghost" data-leaderboard-range="365d" type="button">Year</button>
                <button class="ghost" data-leaderboard-range="all" type="button">All</button>
              </div>
            </div>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>User</th>
                  <th>Learned words</th>
                </tr>
              </thead>
              <tbody id="leaderboard-body"></tbody>
            </table>
          </div>
          <div class="status" id="leaderboard-status" role="status"></div>
        </div>
      </section>

      <section id="profile" class="section">
        <div class="section-head">
          <div>
            <h2>Profile</h2>
            <p>Account details and your favourite words.</p>
          </div>
          <div class="section-actions">
            <button class="ghost" id="refresh-profile" type="button">Refresh</button>
          </div>
        </div>

        <div class="grid" data-dnd-scope="profile-grid">
          <div class="card" style="--delay: 0.05s;" data-card-id="profile-account">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Account</h3>
                  <p id="profile-email">—</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>
            <div class="profile-meta">
              <div class="profile-meta-row">
                <span class="profile-meta-label">Member since</span>
                <span class="profile-meta-value" id="profile-created-at">—</span>
              </div>
              <div class="profile-meta-row">
                <span class="profile-meta-label">Total words</span>
                <span class="profile-meta-value" id="profile-total-words">0</span>
              </div>
              <div class="profile-meta-row">
                <span class="profile-meta-label">Starred words</span>
                <span class="profile-meta-value" id="profile-starred-words">0</span>
              </div>
              <div class="profile-meta-row">
                <span class="profile-meta-label">Due today</span>
                <span class="profile-meta-value" id="profile-due-today">0</span>
              </div>
              <div class="status" id="profile-status" role="status"></div>
            </div>
          </div>

          <div class="card table-card" style="--delay: 0.1s;" data-card-id="profile-favourites">
            <div class="card-head">
              <div class="card-head-row">
                <div>
                  <h3>Starred</h3>
                  <p id="profile-starred-count">No favourites yet.</p>
                </div>
                <button class="drag-handle" type="button" draggable="true" aria-label="Move card" title="Drag to move"></button>
              </div>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Term</th>
                    <th>Translation</th>
                    <th>Tags</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="profile-starred-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p>FastAPI + SQLite + Vanilla JS. Built for daily focus.</p>
    </footer>

    <div class="modal" id="auth-modal" hidden>
      <div class="modal-backdrop" id="auth-modal-backdrop"></div>
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="auth-title">
        <div class="modal-head">
          <h3 id="auth-title">Sign in</h3>
          <button class="modal-close" id="auth-modal-close" type="button" aria-label="Close"></button>
        </div>
        <form id="auth-form" class="form">
          <label>
            <span>Email</span>
            <input id="auth-email" type="email" autocomplete="email" required />
          </label>
          <label>
            <span>Password</span>
            <input id="auth-password" type="password" autocomplete="current-password" required />
          </label>
          <div class="form-actions">
            <button class="primary" id="auth-submit" type="submit">Sign in</button>
            <button class="ghost" id="auth-switch-mode" type="button">Create account</button>
          </div>
          <div class="status" id="auth-error" role="status"></div>
        </form>
      </div>
    </div>

    <div class="modal" id="confirm-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal-backdrop" data-confirm-cancel></div>
      <div class="modal-card" role="document">
        <h3 id="confirm-title">Confirm action</h3>
        <p id="confirm-message">Are you sure?</p>
        <div class="modal-actions">
          <button class="ghost" type="button" data-confirm-cancel>Cancel</button>
          <button class="primary" type="button" data-confirm-accept>Confirm</button>
        </div>
      </div>
    </div>

    <script type="module" src="/static/app.js"></script>
  </body>
</html>
